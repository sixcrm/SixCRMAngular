<div inViewport (inside)="fetch()" class="movers-card">
  <div class="movers-card__title">
    <div class="movers-card__title__main">{{'DASHBOARD_MOVERS_TITLE' | translate}}</div>
    <div class="movers-card__title__sub">{{'DASHBOARD_MOVERS_SUBTITLE' | translate}}</div>
    <md-icon [md-menu-trigger-for]="downloadOptions">more_vert</md-icon>
    <md-menu #downloadOptions="mdMenu" x-position="before">
      <button md-menu-item (click)="download('json')">{{'CHART_DOWNLOADJSON' | translate}}</button>
      <button md-menu-item (click)="download('csv')">{{'CHART_DOWNLOADCSV' | translate}}</button>
      <button md-menu-item (click)="download('excel')">{{'CHART_DOWNLOADEXCEL' | translate}}</button>
    </md-menu>
  </div>

  <div class="movers-card__container">

    <server-error-message (refresh)="refreshData()" *ngIf="serverError; else data"></server-error-message>
    <ng-template #data>
      <ng-container *ngIf="!loading; else moversLoader">
        <div class="dashboard__table-chart__no-data" *ngIf="(!campaignDelta || campaignDelta.length === 0); else movers">{{'DASHBOARD_MOVERS_NODATA' | translate}}</div>
        <ng-template #movers>
          <div *ngFor="let campaign of campaignDelta" [routerLink]="['/campaigns', campaign.campaignId]" class="movers-card__item">
            <div class="movers-card__item__text">
              <div class="movers-card__item__text__main">{{campaign.campaignName}}</div>
              <div class="movers-card__item__text__sub">{{campaign.campaignId.substring(0, 8) + '...'}}</div>
            </div>

            <div class="movers-card__item__data">
              <div [class.dec]="isDecing(campaign)" class="movers-card__item__data__percentage">
                <span>{{campaign.percentageChangeAmount}} ({{campaign.percentageChangeCount}})</span>
                <md-icon>{{isDecing(campaign) ? 'arrow_downward' : 'arrow_upward'}}</md-icon>
              </div>
            </div>
          </div>
        </ng-template>
      </ng-container>
      <ng-template #moversLoader>
        <table-loader [numberOfRows]="5" [rowHeight]="20" [rowMarginVertical]="18"></table-loader>
      </ng-template>
    </ng-template>
  </div>

  <div class="movers-card__actions"><span [routerLink]="['/coming-soon']">{{'CHART_VIEWMORE' | translate}}</span></div>
</div>
