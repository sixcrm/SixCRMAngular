<schedule-detailed-header
  [displayMode]="displayMode"
  [zoomLevel]="zoomLevel"
  [sideVisible]="sideVisible"
  [singleScheduleMode]="singleScheduleMode"
  [statusMessage]="statusMessage"
  (undo)="undo()"
  (revert)="revert()"
  (sideVisibleChanged)="sideVisible = $event"
  (zoomChanged)="zoomLevel = $event"
  (displayModeChanged)="changeDisplayMode($event)"
  (filterChanged)="filterProductSchedulesValue = $event">
</schedule-detailed-header>

<div class="flex-custom">
  <schedule-detailed-list
    [singleScheduleMode]="singleScheduleMode"
    [productSchedules]="schedulesHistory[historyIndex] | filterStrings: filterProductSchedulesValue: productScheduleFilterMapper"
    [sideVisible]="sideVisible"
    [products]="products"
    [allProducts]="allProducts"
    (newProductScheduleAdded)="addNewProductSchedule($event)"
    (newProductAdded)="addNewProduct($event)"
    (selected)="selectDetails($event)">
  </schedule-detailed-list>
  <schedule-detailed-timeline
    [productSchedules]="schedulesHistory[historyIndex] | filterStrings: filterProductSchedulesValue: productScheduleFilterMapper"
    [products]="products"
    [singleScheduleMode]="singleScheduleMode"
    [zoomLevel]="zoomLevel"
    [start]="startDate"
    (scheduleChanged)="createNewState(true)"
    (selected)="selectDetails($event)">
  </schedule-detailed-timeline>
</div>

<ng-template #details>
  <schedule-details
    [singleScheduleMode]="singleScheduleMode"
    [hideDetails]="selectedIndex === 1"
    [allProducts]="allProducts"
    [schedule]="selectedSchedule"
    [startDate]="startDate"
    (focusSchedule)="selectDetails($event)"
    (save)="createNewState(true)"
    (deleteSchedule)="removeSchedule($event)"
    (deleteProductSchedule)="removeProductSchedule($event)"
    (close)="deselectSchedule()">
  </schedule-details>
</ng-template>
