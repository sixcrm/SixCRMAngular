<div #indexR class="entity-index">
  <customer
    *ngIf="showEntityDetails"
    [mode]="mode"
    [entityId]="mode === 'view' ? showEntityId : ''"
    [fullScreen]="fullScreen"
    (close)="hideEntityDetails()"
    (deleteEntity)="deleteEntity($event)">
  </customer>

  <div class="entity-index__title">Customers</div>

  <button md-icon-button color="primary" *ngIf="hasWritePermission()" class="entity-index__add" (click)="openAddEntity()"><md-icon>add</md-icon></button>

  <md-card class="entity-index__card">
    <md-card-content class="entity-index__card__content">

      <table class="entity-index__table highlight">
        <thead class="entity-index__table__header">
        <tr>
          <th data-field="firstName">First Name <md-icon>keyboard_arrow_down</md-icon> </th>
          <th data-field="lastName">Last Name <md-icon>keyboard_arrow_down</md-icon> </th>
          <th data-field="state">State <md-icon>keyboard_arrow_down</md-icon> </th>
          <th data-field="city">City <md-icon>keyboard_arrow_down</md-icon> </th>
          <th>Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let entity of entities">
          <td (click)="viewEntity(entity.id)">{{entity.firstName}}</td>
          <td (click)="viewEntity(entity.id)">{{entity.lastName}}</td>
          <td (click)="viewEntity(entity.id)">{{entity.address.state}}</td>
          <td (click)="viewEntity(entity.id)">{{entity.address.city}}</td>
          <td>
            <table-actions
              [service]="service"
              (viewClicked)="viewEntity(entity.id)"
              (copyClicked)="copyEntity(entity.id)"
              (exportClicked)="exportEntity(entity.id)"
              (editClicked)="editEntity(entity.id)"
              (deleteClicked)="deleteEntity(entity.id)">
            </table-actions>
          </td>
        </tr>
        </tbody>
      </table>

      <table-pagination
        [limit]="limit"
        [paginationValues]="paginationValues"
        [previousDisabled]="page <= 0"
        [nextDisabled]="!hasMorePages()"
        (previous)="previous()"
        (next)="next()"
        (updateLimit)="updateLimit($event)">
      </table-pagination>
    </md-card-content>
  </md-card>
</div>
